
##Task 2: Spring REST
Spring REST controller that handles user registration. The REST resource should be accessible via "/userservice/register" and
accepts following JSON data:

	{
		"firstName": "Some first name",
		"lastName": "The last name",
		"userName": "The user name",
		"password": "The password in plain text"
	}

In case of success it should return the user object without the password:

	{
	"id": "Id generated by the back-end",
	"firstName": "Some first name",
	"lastName": "The last name",
	"userName": "The user name"
	}
	
In case the username is already existing, an error response should be returned with HTTP error-code 409:

	{
	"code": "USER_ALREADY_EXISTS",
	"description": "A user with the given username already exists"
	}

Preconditions
You have an user-repository service available which you can autowire into the REST controller:

	package com.staxter.userrepository;
	public interface UserRepository{
	User createUser( User user ) throws UserAlreadyExistsException;
	}
	And following data object
	package com.staxter.userrepository;
	public class User{
	private String id;
	private String firstName;
	private String lastName;
	private String userName;
	private String plainTextPassword;
	private String hashedPassword;
	// Getter and setter omitted for readability
	}

Important!
We run a lot of microservices on quite weak machines. That’s why we take care of it’s size. Please use external libraries wisely.

Bonus task

- Write login logic;
- Write and deliver a running Spring Boot application (without database).

Extra bonus task

Write unit tests for the REST controller handling all use cases.

## DEV Considerations
The application should be simple work without database,therefore to store the user was used a static list in the repository class to save the manipulate the user, another approach without database would be store it in files in the file system, or even using database such as SQLite that stores files in files in the file system, but as one of the requirement is to use external library as less as possible.
In the real world a database nosql or relational would be good approach, it could be in a remote server not spending resource for the microservice machine.

to be compliant with that requirement, it was used spring web starter that has all dependency that we need to build the rest application and excluding some dependency, for the sake of the "lightweightness" of the jar file.

Class names, package names and structure, were used as much as possible the same mentioned in the description of the test.
For instance could have been created a class UserService to be use in the controller, but was understood that it was suppose to have a class UserRepository on the controller

for saving the hashed password was written a simple algorithm  to hash the password using SHA1, it is a just simple example, in the real world, a stronger algorithm could/should be used such as bcrypt, or even sha1 with a salted key, the spring boot provides good solution already with the spring boo security but including this library would as well against the "less as less as possible external libs", for a test purpose I assume that is fine.



## run    

For running the application is necessary to have:
- Maven installed and configured in the PATH VARIABLE(or replace the command to use the mvn location).
- Java 8 or above

Note: it was tested using linux ubuntu terminal, and windows 10 PRO using git bash(git terminal)	

In the project folder run: 
	
	sh ./run-server.sh 

That will bring up the webservice in the port 8080 and you can test it using any  tool such as postman or by running curl command. 

The services will be available at the URLs 
	
	http://localhost:8080/userservice/register
	http://localhost:8080/userservice/login

Note: if the port 8080 is already in use in your OS please edit the file sh ./run-server.sh replacing the valuer of the arg

	server.port=8080 

for example

	server.port=40000 

for a free port, remember to replace as well in the URLs and in the test script(api-test-curl.sh) mentioned bellow if you are using it 	
	

There is a script in the project folder, executing it after run the server it will give you the response from the webservice
you can open the file to see the executed requests

	sh ./api-test-curl.sh 

Test execute using curl:

Curl execution registering a user:

	$ curl -s -d '{"firstName": "Test Name","lastName": "Test Last Name","userName": "admin","password": "admin1234"}' -H "Content-Type: application/json" -X POST http://localhost:8080/userservice/register
	
curl response:

	{"id":"fb7c7a03-442e-442d-b16e-d222d7a84401","firstName":"Test Name","lastName":"Test Last Name","userName":"admin"}


Curl execution registering a user already registered:

	$ curl -s -d '{"firstName": "Test Name","lastName": "Test Last Name","userName": "admin","password": "admin1234"}' -H "Content-Type: application/json" -X POST http://localhost:8080/userservice/register

Curl response:

	{"code":"USER_ALREADY_EXISTS","description":"A user with the given username already exists"}

Curl execution login with a registered user:

	$ curl -s -d '{"userName": "admin","password": "admin1234"}' -H "Content-Type: application/json" -X POST http://localhost:8080/userservice/login

Curl response:

	{"code":"LOGIN_SUCCESS","description":"login performed successfully"}

Curl execution login with wrong password:

	$ curl -s -d '{"userName": "admin","password": "admin123"}' -H "Content-Type: application/json" -X POST http://localhost:8080/userservice/login

Curl response:

	{"code":"LOGIN_ERROR","description":"Wrong username or password provided"}
